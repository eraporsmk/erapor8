import{_ as R,a as B}from"./AppTextField-uDjqgyV_.js";import{r as m,i as F,j as N,ay as U,Y as E,c as $,o as q,d as a,b as s,m as e,H as u,v as g,e as l,t as k,a0 as M,a1 as H,F as K,ab as h,az as Y}from"./main-qkHrXkc4.js";import{u as w,m as z,a as G}from"./misc-mask-light-Cr5Pl8am.js";import{u as O}from"./useAbility-DJYPXUdG.js";import{$ as J}from"./api-DEnPzuxT.js";import{u as Q}from"./useApi-Dp9jxlMN.js";import{c as W}from"./createUrl-DPMdrIhE.js";import{a as d,V as x}from"./VRow-SRN4MEaa.js";import{V as X}from"./VImg-jU4EjX8n.js";import{V as Z}from"./VCard-DLmDpUr4.js";import{V as I}from"./VCardText-GlWye268.js";import{V as ee}from"./VForm-QG9aQt9P.js";import{V as te}from"./VCheckbox-krBqed_f.js";import"./VLabel-BAOxDQxB.js";import"./VTextField-DUDanKVU.js";import"./forwardRefs-B7WXio9P.js";import"./VList-Dy22zsne.js";import"./VAvatar-BC1zbJAc.js";import"./VDivider-BJOoipq5.js";import"./VMenu-CURS9V2H.js";import"./VSelectionControl-aLnkY-Qf.js";import"./VChip-D4J-LAp5.js";import"./index-9rIf2CJL.js";/* empty css              */const se="/build/assets/auth-v2-login-illustration-bordered-dark-cDkPk8mY.png",ae="/build/assets/auth-v2-login-illustration-bordered-light-CIHqcIVA.png",oe="/build/assets/auth-v2-login-illustration-dark-ClExSVqL.png",le="/build/assets/auth-v2-login-illustration-light-C4sKfRS1.png",re={href:"javascript:void(0)"},ie={class:"auth-logo d-flex align-center gap-x-3"},ne=["src"],me={class:"auth-title"},ue={class:"position-relative bg-background w-100 me-0"},de={class:"d-flex align-center justify-center w-100 h-100",style:{"padding-inline":"6.25rem"}},pe=["src"],ce={class:"text-h2 mb-1"},fe=["src"],ge={class:"d-flex align-center flex-wrap justify-space-between my-6"},Me={__name:"login",async setup(he){let p,_;const C=w(le,oe,ae,se,!0),S=w(G,z),V=m(),o=m({email:"",password:"",semester_id:"",remember:!1}),b=F(),L=N(),T=O(),f=m({email:void 0,password:void 0});m(!1);const c=m(!1),A=async()=>{try{const i=await J("/auth/login",{method:"POST",body:{email:o.value.email,password:o.value.password,semester_id:o.value.semester_id},onResponseError({response:r}){f.value=r._data.errors}}),{accessToken:t,userData:n,userAbilityRules:y}=i;h("userAbilityRules").value=n.ability,T.update(n.ability),h("userData").value=n,h("accessToken").value=t,await Y(()=>{L.replace(b.query.to?String(b.query.to):"/")})}catch(i){console.error(i)}},D=()=>{var i;(i=V.value)==null||i.validate().then(({valid:t})=>{t&&A()})},{data:v,execute:_e}=([p,_]=U(()=>Q(W("/auth/semester"))),p=await p,_(),p),j=E(()=>v.value.semester),P=m(v.value.semester_id);return o.value.semester_id=P.value,(i,t)=>{const n=R,y=B;return q(),$(K,null,[a("a",re,[a("div",ie,[a("img",{src:e(u).app.logo,height:"24"},null,8,ne),a("h1",me,g(e(u).app.title),1)])]),s(x,{"no-gutters":"",class:"auth-wrapper bg-surface"},{default:l(()=>[s(d,{md:"8",class:"d-none d-md-flex"},{default:l(()=>[a("div",ue,[a("div",de,[s(X,{"max-width":"613",src:e(C),class:"auth-illustration mt-16 mb-2"},null,8,["src"])]),a("img",{class:"auth-footer-mask flip-in-rtl",src:e(S),alt:"auth-footer-mask",height:"280",width:"100"},null,8,pe)])]),_:1}),s(d,{cols:"12",md:"4",class:"auth-card-v2 d-flex align-center justify-center"},{default:l(()=>[s(Z,{flat:"","max-width":500,class:"mt-12 mt-sm-0 pa-6"},{default:l(()=>[s(I,{class:"text-center"},{default:l(()=>[a("h1",ce,[a("img",{src:e(u).app.logo,height:"28"},null,8,fe),k(" "+g(e(u).app.title),1)]),a("p",null,"Versi "+g(e(u).app.version),1),t[5]||(t[5]=a("p",{class:"mb-0"},"Silahkan login untuk dapat mengakses Aplikasi",-1))]),_:1}),s(I,null,{default:l(()=>[s(ee,{ref_key:"refVForm",ref:V,onSubmit:M(D,["prevent"])},{default:l(()=>[s(x,null,{default:l(()=>[s(d,{cols:"12"},{default:l(()=>[s(n,{modelValue:e(o).email,"onUpdate:modelValue":t[0]||(t[0]=r=>e(o).email=r),"error-messages":e(f).email,autofocus:"",label:"Email",type:"email",placeholder:"Email/NUPTK/NISN"},null,8,["modelValue","error-messages"])]),_:1}),s(d,{cols:"12"},{default:l(()=>[s(n,{modelValue:e(o).password,"onUpdate:modelValue":t[1]||(t[1]=r=>e(o).password=r),"error-messages":e(f).password,label:"Password",placeholder:"············",type:e(c)?"text":"password",autocomplete:"password","append-inner-icon":e(c)?"tabler-eye-off":"tabler-eye","onClick:appendInner":t[2]||(t[2]=r=>c.value=!e(c))},null,8,["modelValue","error-messages","type","append-inner-icon"])]),_:1}),s(d,{cols:"12"},{default:l(()=>[s(y,{items:e(j),"item-title":"nama","item-value":"semester_id",label:"Tahun Pelajaran",modelValue:e(o).semester_id,"onUpdate:modelValue":t[3]||(t[3]=r=>e(o).semester_id=r),placeholder:"Select Item"},null,8,["items","modelValue"]),a("div",ge,[s(te,{modelValue:e(o).remember,"onUpdate:modelValue":t[4]||(t[4]=r=>e(o).remember=r),label:"Simpan Login"},null,8,["modelValue"]),t[6]||(t[6]=a("a",{class:"text-primary",href:"javascript:void(0)"}," Lupa Password? ",-1))]),s(H,{block:"",type:"submit"},{default:l(()=>t[7]||(t[7]=[k(" Login ")])),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1})],64)}}};export{Me as default};
