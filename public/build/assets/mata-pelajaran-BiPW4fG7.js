import{_ as b}from"./TablePagination-BC4qIMNA.js";import{_ as P}from"./AppTextField-DODsRzvk.js";import{_ as x}from"./AppSelect-CpAXSeRN.js";import{u as h,c as w}from"./createUrl-Dgsam9iM.js";import{d as C,a as k}from"./mixins-DUoFJIe2.js";import{V as D,a as T,c as j,b as Q}from"./VCard-CCfhXO7W.js";import{V as c}from"./VDivider-CFflUtot.js";import{V as U,a as f}from"./VRow-ub3VnLn2.js";import{V as $}from"./VDataTableServer-CHIBUacD.js";import{r as i,G as A,w as _,c as B,b as t,e as o,o as M,t as S,m as r}from"./main-BzLoFRvr.js";import"./VLabel-CWQCDM4k.js";import"./VImg-Jv8lcKEA.js";import"./VField-CxtxXTW4.js";import"./forwardRefs-DWGaNmQL.js";import"./VSelect-ciPVB7pe.js";import"./VList-BQ7AU-9c.js";import"./ssrBoot--1XSDtH_.js";import"./VAvatar-H5uJfWsp.js";import"./VOverlay-BQcHgBfV.js";import"./scopeId-DdmYhUDs.js";import"./VMenu-DYy_ZhjB.js";import"./VSelectionControl-DONQaZ0v.js";import"./VChip-BFozsSW8.js";import"./VSlideGroup-BW-8BREM.js";import"./index-BxkgbwWS.js";/* empty css              */import"./VTable-DGUF3slK.js";import"./filter-Q1sm4LqB.js";const ue={__name:"mata-pelajaran",setup(N){const e=i({page:1,itemsPerPage:10,searchQuery:"",selectedRole:null,sortby:"mata_pelajaran_id",sortbydesc:"ASC"}),g=[{title:"ID Mapel",key:"mata_pelajaran_id"},{title:"Nama Mata Pelajaran",key:"nama"}],d=i([]),p=i(0),n=i(!1);A(async()=>{await u()}),_(e,async()=>{await u()},{deep:!0}),_(()=>e.value.searchQuery,()=>{e.value.page=1});const y=s=>{var a,m;e.value.sortby=(a=s[0])==null?void 0:a.key,e.value.sortbydesc=(m=s[0])==null?void 0:m.order},u=async()=>{n.value=!0;try{let a=(await h(w("/referensi/mata-pelajaran",{query:{sekolah_id:C.sekolah_id,semester_id:k.semester_id,q:e.value.searchQuery,page:e.value.page,per_page:e.value.itemsPerPage,sortby:e.value.sortby,sortbydesc:e.value.sortbydesc}}))).data;d.value=a.value.data.data,p.value=a.value.data.total}catch(s){console.error(s)}finally{n.value=!1}};return(s,a)=>{const m=x,v=P,V=b;return M(),B("section",null,[t(D,{class:"mb-6"},{default:o(()=>[t(T,{class:"pb-4"},{default:o(()=>[t(j,null,{default:o(()=>a[3]||(a[3]=[S("Data Mata Pelajaran")])),_:1})]),_:1}),t(c),t(Q,null,{default:o(()=>[t(U,null,{default:o(()=>[t(f,{cols:"12",md:"4",class:"d-flex align-items-center"},{default:o(()=>[t(m,{modelValue:r(e).itemsPerPage,"onUpdate:modelValue":a[0]||(a[0]=l=>r(e).itemsPerPage=l),items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"}]},null,8,["modelValue"])]),_:1}),t(f,{cols:"12",md:"4","offset-md":"4",class:"d-flex gap-4"},{default:o(()=>[t(v,{modelValue:r(e).searchQuery,"onUpdate:modelValue":a[1]||(a[1]=l=>r(e).searchQuery=l),placeholder:"Cari Data"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(c),t($,{class:"text-no-wrap",items:r(d),"server-items-length":r(p),headers:g,options:r(e),loading:r(n),"loading-text":"Loading...","onUpdate:sortBy":y},{bottom:o(()=>[t(V,{page:r(e).page,"onUpdate:page":a[2]||(a[2]=l=>r(e).page=l),"items-per-page":r(e).itemsPerPage,"total-items":r(p)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items","server-items-length","options","loading"])]),_:1})])}}};export{ue as default};
